<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>最短路径</title>
</head>
<body>
<script type="text/javascript">
  /*Bellman-Ford 优化*/
  ;(function(){
    var map = []
        /*队列*/
        a = [],
        head = 1,
        tail = 1,
        /*标记*/
        book = new Array(6),
        /*邻接表*/
        u = [undefined,1,1,2,2,3,4,5],
        v = [undefined,2,5,3,5,4,5,3],
        w = [undefined,2,10,3,7,4,5,6],
        first = [undefined,-1,-1,-1,-1,-1,-1,-1],
        next = [undefined,-1,-1,-1,-1,-1,-1,-1],
        n = 5,
        m = 7,
        dis = [undefined,0,49,49,49,49],
        k = 0;
  /*顶点1入队*/
  a[head] = 1;
  book[head] = 1;
  tail ++;

  /*初始化first、next*/
  for(var i = 1; i <= m ; i++) {
    next[i] = first[u[i]];
    first[u[i]] = i;
  }
  /*遍历*/
  while(head < tail) {
    k = first[a[head]];
    while(k != -1) {//边数编号不为-1，即该顶点存在边
      if(dis[u[k]] + w[k] < dis[v[k]]) {
      	dis[v[k]] = dis[u[k]] + w[k];
      	if (typeof book[v[k]] == 'undefined') {
      	  a[tail] = v[k];
      	  tail ++;
      	  book[v[k]] = 1;
      	}
      }
      k = next[k];
    }
    book[a[head]] = 0;
    head++;
  }
  console.log(dis)
  })()
</script>
</body>
</html>